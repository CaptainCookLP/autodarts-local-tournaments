<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Autodarts Scraper – Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <header>
      <h1>Autodarts Toolkit</h1>
      <nav>
        <button id="tab-settings" class="tab active">Scraper</button>
        <button id="tab-x01" class="tab">X01 Helper</button>
        <button id="tab-output" class="tab">Output</button>
        <button id="tab-tournament" class="tab">Turnier</button>
      </nav>
    </header>
    <main>
      <section id="view-settings" class="view active">
        <div class="card">
          <h2>Variablen</h2>
          <div class="row">
            <button id="addVar">+ Variable per Klick auswählen</button>
            <button id="manualVar">+ Variable manuell</button>
          </div>
          <table id="vars">
            <thead>
              <tr>
                <th>Name</th>
                <th>Selector</th>
                <th>Modus</th>
                <th>Attribut/Regex</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="row right">
            <button class="secondary" id="testVars">Jetzt testen</button>
            <button id="save">Speichern</button>
          </div>
        </div>
        <div class="card">
          <h2>HTTP POST</h2>
          <div class="row">
            <label class="inline"
              ><input type="checkbox" id="whEnabled" /> aktivieren</label
            ><input id="whUrl" placeholder="https://example.com/hook" />
          </div>
          <p class="hint">
            Sende bei Änderung JSON an diese URL (Content-Type: application/json).
          </p>
        </div>
        <div class="card">
          <h2>Tools</h2>
          <div class="row">
            <button class="secondary" id="downloadXml">
              Settings als XML herunterladen
            </button>
            <input
              type="file"
              id="importXml"
              accept=".xml,application/xml"
              style="display:none;"
            />
            <button id="importBtn">Settings aus XML importieren</button>
            <button id="importDefaultsBtn">Werkseinstellungen laden</button>
          </div>
        </div>
      </section>
      <section id="view-x01" class="view">
        <div class="card">
          <h2>X01-Einstellungen</h2>
          <label for="base">Base score</label>
          <select id="base">
            <option>121</option><option>170</option><option>301</option>
            <option selected>501</option><option>701</option><option>901</option>
          </select>
          <div class="row">
            <div>
              <label for="in">In mode</label>
              <select id="in">
                <option>Straight</option><option>Double</option><option>Master</option>
              </select>
            </div>
            <div>
              <label for="out">Out mode</label>
              <select id="out">
                <option>Straight</option><option selected>Double</option><option>Master</option>
              </select>
            </div>
          </div>
          <label for="rounds">Max rounds</label>
          <select id="rounds">
            <option>15</option><option>20</option><option selected>50</option><option>80</option>
          </select>
          <div class="row">
            <div>
              <label for="bull">Bull mode</label>
              <select id="bull">
                <option selected>25/50</option><option>50/50</option>
              </select>
            </div>
            <div>
              <label for="bulloff">Bull-off</label>
              <select id="bulloff">
                <option selected>Off</option><option>Normal</option><option>Official</option>
              </select>
            </div>
          </div>
          <label for="lobby">Lobby Sichtbarkeit</label>
          <select id="lobby">
            <option>Public</option><option selected>Private</option>
          </select>
          <label for="match">Match mode</label>
          <select id="match">
            <option>Off</option><option>Legs</option><option>Sets</option>
          </select>
          <div id="match-legs" class="row hidden">
            <div>
              <label for="legsTo">First to (legs)</label>
              <select id="legsTo">
                <option value="1">1</option><option value="2">2</option><option value="3">3</option>
                <option value="4">4</option><option value="5">5</option><option value="6">6</option>
                <option value="7">7</option><option value="8">8</option><option value="9">9</option>
                <option value="10">10</option><option value="11">11</option>
              </select>
            </div>
          </div>
          <div id="match-sets" class="row hidden">
            <div>
              <label for="setsTo">First to (sets)</label>
              <select id="setsTo">
                <option value="2">2</option><option value="3">3</option><option value="4">4</option>
                <option value="5">5</option><option value="6">6</option><option value="7">7</option>
              </select>
            </div>
            <div>
              <label for="legsPerSet">First to (legs per set)</label>
              <select id="legsPerSet">
                <option value="2">2</option><option value="3">3</option>
              </select>
            </div>
          </div>
        </div>
        <div class="card">
          <h2>Lobby-Automatisierung</h2>
          <label for="board">Board (Name oder UUID)</label>
          <input id="board" placeholder="z. B. PiBoard oder 470117f6-..." />
          <label for="players">Zusätzliche Spieler (Komma getrennt)</label>
          <input id="players" placeholder="z. B. PLAYER 1, NICKLAS" />
          <div class="row">
            <label><input type="checkbox" id="removeHost" /> Initialen Spieler (Host) entfernen</label>
            <label><input type="checkbox" id="startGame" checked /> Spiel automatisch starten</label>
          </div>
        </div>
        <div class="row">
          <button id="saveX01">Speichern</button>
          <button id="reset">Auf Standard zurücksetzen</button>
        </div>
      </section>
      <section id="view-output" class="view">
        <div class="card">
          <h2>Live Output</h2>
          <pre id="liveJson">{}</pre>
          <div class="row">
            <button id="copyJson">JSON kopieren</button>
            <button id="refresh">Aktualisieren</button>
          </div>
        </div>
      </section>
      <section id="view-tournament" class="view">
        <div class="card">
          <h2>Turnierbaum</h2>
          <label class="inline"><input type="checkbox" id="tEnabled" /> Turniermodus aktivieren</label>
          <div class="row">
            <div>
              <h3>Spiel 1</h3>
              <input id="m1p1" placeholder="Spieler 1" />
              <label><input type="radio" name="m1w" id="m1w1" /> Sieger</label>
              <input id="m1p2" placeholder="Spieler 2" />
              <label><input type="radio" name="m1w" id="m1w2" /> Sieger</label>
              <label>Modus
                <select id="m1mode">
                  <option>301</option><option selected>501</option><option>701</option><option>901</option>
                </select>
              </label>
            </div>
            <div>
              <h3>Spiel 2</h3>
              <input id="m2p1" placeholder="Spieler 3" />
              <label><input type="radio" name="m2w" id="m2w1" /> Sieger</label>
              <input id="m2p2" placeholder="Spieler 4" />
              <label><input type="radio" name="m2w" id="m2w2" /> Sieger</label>
              <label>Modus
                <select id="m2mode">
                  <option>301</option><option selected>501</option><option>701</option><option>901</option>
                </select>
              </label>
            </div>
          </div>
          <div class="row">
            <div>
              <h3>Spiel um Platz 3</h3>
              <span id="thirdP1">Verlierer Spiel1</span> vs <span id="thirdP2">Verlierer Spiel2</span>
              <label>Modus
                <select id="m3mode">
                  <option>301</option><option selected>501</option><option>701</option><option>901</option>
                </select>
              </label>
            </div>
            <div>
              <h3>Finale</h3>
              <span id="finalP1">Sieger Spiel1</span> vs <span id="finalP2">Sieger Spiel2</span>
              <label>Modus
                <select id="m4mode">
                  <option>301</option><option selected>501</option><option>701</option><option>901</option>
                </select>
              </label>
            </div>
          </div>
          <p id="status"></p>
          <div class="row">
            <button id="saveTournament">Speichern</button>
            <button id="openTournamentTree" class="secondary">Turnierbaum öffnen</button>
          </div>
        </div>
      </section>
    </main>
    <div id="addVarModal" class="modal hidden">
      <div class="modal-card">
        <h3>Variable hinzufügen</h3>
        <div class="row"><label>Selector</label><input id="m-selector" readonly /></div>
        <div class="row"><label>Beispiel</label><input id="m-sample" readonly /></div>
        <div class="row"><label>Name</label><input id="m-name" placeholder="z. B. player1_score" /></div>
        <div class="row"><label>Modus</label><select id="m-mode"><option value="text">text</option><option value="number">number</option><option value="attr">attr</option></select></div>
        <div class="row" id="m-extra-row"><label id="m-extra-label">Regex / Attribut</label><input id="m-extra" placeholder="bei number: Regex, bei attr: Attribut-Name" /></div>
        <div class="row right"><button class="secondary" id="m-cancel">Abbrechen</button><button id="m-add">Hinzufügen</button></div>
      </div>
    </div>
    <footer><small>v1.0.4</small></footer>
        <script src="options-tabs.js"></script>
        <script src="scraper-options.js"></script>
        <script src="settings.js"></script>
        <script src="x01-options.js"></script>
        <script src="tournament-options.js"></script>
      </body>
    </html>
